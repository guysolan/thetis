---
import { cn } from "@/lib/utils";
import { buttonVariants } from "@/components/ui/button";
import { Image } from "astro:assets";
import HighlightedWord from "@/components/HighlightedWord";
import nightSplintImage from "@/components/products/images/night-splint/night_splint_bed_side.jpg";
import traumaSplintImage from "@/components/products/images/trauma-splint/trauma_splint.jpg";
// Define timeline points in a more structured way
const timelinePoints = [
  { label: "Rupture", position: 2 },
  { label: "Week 1", position: 25 },
  { label: "Week 2", position: 48.5 },
  { label: "Week 6", position: 71.75 },
  { label: "Week 12", position: 95 },
];

// Define product sections for better maintainability
const products = [
  {
    title: "Suspected Rupture? Replace Plaster of Paris",
    image: {
      src: traumaSplintImage,
      alt: "Trauma Splint Image",
    },
    description:
      "Instead of immediate plaster casting in A&E/ER, the Achilles rupture splint (HCPCS code Q4051) offers a more flexible solution for initial assessment and diagnosis.",
    benefits: [
      "Allows for easy ultrasound assessment",
      "Halves the time from A&E to treatment decision",
      "Eliminates need for plaster room visits",
      "Maintains proper tip-toe position for initial healing",
    ],
    links: {
      primary: "/order-wholesale",
      text: "Order for your Clinic",
    },
  },
  {
    title: "Recovery Period: Wear at Night",
    image: {
      src: nightSplintImage,
      alt: "Splint Image",
    },
    description:
      "During the crucial 2-12 week recovery period, the splint can also replace the orthopaedic boot at night.",
    benefits: [
      "Maintains proper healing position while sleeping",
      "Significantly more comfortable than sleeping in a boot",
      "Prevents accidental re-rupture during sleep",
      "Compatible with standard daytime boot treatment",
    ],
    links: {
      primary: "/night-splint",
      text: "Buy it Now",
    },
    reverse: true,
  },
];
---

<div class="relative w-full">
  <!-- Introduction Section -->
  <div class="relative mx-auto px-4 md:px-8 pt-16 max-w-[1400px] text-center">
    <h2
      class="mb-4 font-semibold text-neutral-900 dark:text-neutral-100 text-3xl md:text-4xl"
    >
      Achilles <HighlightedWord>Rupture</HighlightedWord> Recovery <HighlightedWord
        >Reimagined</HighlightedWord
      >
    </h2>
    <p
      class="mx-auto mb-12 max-w-3xl text-muted-foreground text-neutral-900 dark:text-neutral-200 text-lg md:text-xl"
    >
      One product with two uses to make Achilles tendon rupture recovery as <HighlightedWord
        >Quick</HighlightedWord
      > and <HighlightedWord>Comfortable</HighlightedWord> as possible
    </p>
  </div>

  <div class="relative flex gap-4 mx-auto px-4 md:px-4 pb-16 max-w-[1400px]">
    <!-- Timeline Bar (Left Side) -->
    <div class="hidden md:block relative px-8 w-24 shrink-0">
      <div
        class="left-8 absolute bg-primary/50 dark:bg-primary/70 w-0.5 h-full"
      >
        {
          timelinePoints.map((point) => (
            <div
              class="-left-6 md:-left-8 absolute flex justify-center items-center gap-2 bg-white dark:bg-black p-1 w-14 md:w-16 dark:text-neutral-200 text-center hover:scale-105 transition-all"
              style={`top: ${point.position}%`}
            >
              <span class="text-muted-foreground dark:text-neutral-400 md:text-lg text-center whitespace-nowrap">
                {point.label}
              </span>
            </div>
          ))
        }
      </div>
    </div>

    <!-- Product Sections (Right Side) -->
    <div class="flex-1">
      {
        products.map((product) => (
          <section class="mb-16 md:mb-24 last:mb-0">
            <div class="flex flex-col gap-4 md:gap-8">
              <h2 class="md:hidden block font-semibold text-neutral-800 dark:text-neutral-200 text-xl">
                {product.title}
              </h2>

              <div class="group flex lg:flex-row flex-col gap-6 md:gap-8">
                <div class="w-full lg:w-1/2">
                  <Image
                    src={product.image.src}
                    alt={product.image.alt}
                    class="shadow-lg group-hover:shadow-xl rounded-lg w-full group-hover:scale-[102%] transition-all duration-300"
                    width={600}
                    height={400}
                  />
                </div>

                <div class="space-y-3 md:space-y-4 w-full lg:w-1/2">
                  <h2 class="hidden md:block font-semibold dark:text-neutral-200 text-2xl">
                    {product.title}
                  </h2>
                  <p class="dark:text-neutral-400 text-base md:text-lg">
                    {product.description}
                  </p>
                  <ul class="space-y-1.5 md:space-y-2 pl-4 md:pl-5 dark:text-neutral-400 text-base md:text-lg list-disc">
                    {product.benefits.map((benefit) => (
                      <li>{benefit}</li>
                    ))}
                  </ul>
                  <div class="flex flex-wrap gap-3 md:gap-4 pt-3 md:pt-4">
                    <a
                      href={product.links.primary}
                      class={cn(
                        buttonVariants({ size: "lg", variant: "default" }),
                        "w-fit md:text-base transition-transform hover:scale-105 dark:text-neutral-200",
                      )}
                    >
                      {product.links.text}
                    </a>
                  </div>
                </div>
              </div>
            </div>
          </section>
        ))
      }
    </div>
  </div>
</div>
