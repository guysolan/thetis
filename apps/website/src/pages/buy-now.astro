---
import BuyButtonVariants from "@/components/products/buy-button/BuyButtonVariants.tsx";
import nightSplint from "@/components/products/images/night-splint/night_splint_bed_top.jpg";
import Layout from "@/layouts/Layout.astro";
import { ClientRouter } from "astro:transitions";
import NightSplintSchema from "@/schemas/NightSplintSchema.astro";
import { Image } from "astro:assets";
import ColorGradient from "@/components/ColorGradient.astro";
import BulkOrders from "../components/buy-button/BulkOrders";
import ReviewsLink from "../components/ReviewsLink";
import CheckWithCareTeam from "@/components/buy-button/CheckWithCareTeam";
---

<Fragment slot="head">
    <NightSplintSchema />
    <ClientRouter />
</Fragment>

<Layout
    title="Achilles Tendon Rupture Splint"
    description="Thetis Medical's Achilles rupture splint to make sleeping more pleasant and bearable. The brace straps to the leg to prevent further tendon injury."
    image="https://thetismedical.com/images/green-shell.png"
    hideFooter={true}
>
    <main class="mb-8">
        <ColorGradient>
            <section class="mt-0 pb-12">
                <div class="mx-auto px-4 max-w-5xl">
                    <div class="flex lg:flex-row flex-col items-start gap-8">
                        {/* Product Image Column */}
                        <div class="hidden lg:block lg:w-3/5">
                            <Image
                                height={700}
                                width={700}
                                class="shadow-md rounded-lg w-full object-cover aspect-square"
                                src={nightSplint}
                                alt="Splint Render"
                            />
                            {/* Add thumbnail gallery here if needed */}
                        </div>

                        {/* Product Info Column */}
                        <div class="top-24 sticky flex flex-col lg:w-2/5">
                            <h1 class="font-semibold text-gray-900 text-3xl">
                                Splint for Achilles Tendon Rupture
                            </h1>

                            <div class="space-y-2 my-4 text-gray-600 text-lg">
                                <p>
                                    Protect your healing tendon while you sleep
                                    with our splint. Designed to maintain
                                    optimal foot position and prevent re-rupture
                                    during your recovery journey.
                                </p>
                            </div>
                            <ReviewsLink size="lg" />
                            <CheckWithCareTeam client:load />
                            <BuyButtonVariants client:load />
                        </div>
                    </div>
                </div>
            </section>
            <BulkOrders />
        </ColorGradient>
    </main>
</Layout>

<script>
    fetch("https://extreme-ip-lookup.com/json/?key=mRicTdUafjFRd3Ufqftq")
        .then((res) => res.json())
        .then((response) => {
            console.log("Country: ", response.country);
            try {
                // Check if on Splint Page
                const shopify = document.getElementById(
                    "shopify-buy-button-wrapper",
                );
                const amazon = document.getElementById(
                    "amazon-buy-button-wrapper",
                );

                if (response.country === "United Kingdom") {
                    amazon?.remove();
                } else {
                    shopify?.remove();
                }
            } catch (error) {
                // console.log(error)
            }
        })
        .catch((reason: any) => {
            console.log(reason);
            // console.log('Request failed');
        });
</script>

<style>
    @keyframes fadeInUp {
        from {
            opacity: 0;
            transform: translateY(20px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .animate-fade-in-up {
        animation: fadeInUp 0.6s ease-out forwards;
        opacity: 0;
    }
</style>
