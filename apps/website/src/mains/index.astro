---
import Layout from "@/layouts/Layout.astro";
import ThetisSchema from "@/schemas/ThetisSchema.astro";
import LandingHero from "@/sections/index/LandingHero.astro";
import Reviews from "@/components/reviews/InfiniteReviews.astro";
import "@thetis/ui/globals.css";
import InteractiveChoice from "@/sections/index/InteractiveChoice";
import WhyThetis from "@/sections/index/WhyThetis.astro";
import OurTeam from "@/sections/index/OurTeam.astro";
import ProfessionalOpinionsCarousel from "@/sections/index/ProfessionalOpinionsCarousel";
import OurImpact from "@/sections/index/OurImpact.astro";
import FinalCTA from "@/sections/index/FinalCTA.astro";
import type { Lang } from "@/config/languages.ts";

const { lang = "en" } = Astro.props as { lang: Lang };

const content = {
    en: {
        title: "Thetis Medical - Better Sleep, Faster Achilles Recovery",
        description:
            "Our patented night splint lets you ditch the boot at bedtime. Free recovery courses guide you week-by-week. Trusted by 5,000+ patients and recommended by leading surgeons.",
        image: "https://thetismedical.com/images/night-splint.png",
    },
    fr: {
        title: "Thetis Medical - Mieux dormir, récupérer plus vite",
        description:
            "Notre attelle de nuit brevetée vous permet d'enlever la botte au coucher. Des cours de récupération gratuits vous guident semaine après semaine. Approuvé par 5 000+ patients.",
        image: "https://thetismedical.com/images/night-splint.png",
    },
    de: {
        title: "Thetis Medical - Besser schlafen, schneller erholen",
        description:
            "Unsere patentierte Nachtschiene lässt Sie den Stiefel nachts ablegen. Kostenlose Genesungskurse begleiten Sie Woche für Woche. Vertrauen von 5.000+ Patienten.",
        image: "https://thetismedical.com/images/night-splint.png",
    },
    es: {
        title: "Thetis Medical - Dormir mejor, recuperarse más rápido",
        description:
            "Nuestra férula nocturna patentada te permite dejar la bota a la hora de dormir. Cursos de recuperación gratuitos te guían semana a semana. Confianza de 5.000+ pacientes.",
        image: "https://thetismedical.com/images/night-splint.png",
    },
    it: {
        title: "Thetis Medical - Dormire meglio, recuperare più velocemente",
        description:
            "Il nostro tutore notturno brevettato ti permette di togliere lo stivale prima di dormire. Corsi di recupero gratuiti ti guidano settimana dopo settimana. Scelto da 5.000+ pazienti.",
        image: "https://thetismedical.com/images/night-splint.png",
    },
};

const currentContent = content[lang as keyof typeof content];
---

<ThetisSchema slot="head" />

<Layout
    title={currentContent.title}
    description={currentContent.description}
    image={currentContent.image}
    lang={lang}
>
    <main class="space-y-16">
        <!-- 1. Hero Section with Testimonial Carousel -->
        <LandingHero lang={lang} />

        <!-- 2. Social Proof: Patient Reviews -->
        <Reviews />

        <!-- 3. Why Thetis Section - Build trust early -->
        <WhyThetis lang={lang} />

        <!-- 4. Our Story Section - Build trust early -->
        <OurTeam lang={lang} />

        <!-- 5. Professional Opinions - Build credibility before problem identification -->
        <ProfessionalOpinionsCarousel lang={lang} client:load />

        <!-- 6. Interactive Choice Section - Problem → Solution -->
        <InteractiveChoice client:load />

        <!-- 7. Our Impact - General stats after solution -->
        <OurImpact lang={lang} />

        <!-- 8. Final CTA Section -->
        <FinalCTA lang={lang} />
    </main>
</Layout>

<script is:inline>
    document.documentElement.classList.remove("dark");

    if (typeof localStorage !== "undefined") {
        localStorage.setItem("theme", "light");
    }
</script>
