---
import BaseHead from "../components/BaseHead.astro";
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";
import { SITE_TITLE } from "../consts";

// Comprehensive product list for survival kit
const survivalKitProducts = [
    // Essential Items
    {
        priority: "essential",
        name: "Walking Boot",
        category: "Essential",
        priceRange: {
            us: "$150-300",
            gb: "Â£120-240"
        },
        keyBenefit: "Maintains plantarflexion to protect your healing tendon and prevent re-rupture",
        actionUrl: {
            us: "/articles/aircast-vs-vacoped",
            gb: "/articles/aircast-vs-vacoped"
        },
        actionText: "Compare Options",
        isExternal: false,
        tags: ["mobility", "protection", "recovery"],
        imagePath: "/images/aircast-vs-vacoped.png",
        description: "The ONLY essential item. Clinical research shows early protected weight-bearing with proper plantarflexion leads to better outcomes and prevents re-rupture.",
        features: ["Maintains plantarflexion (tip-toe position)", "Prevents re-rupture during healing", "Evidence-based protection"]
    },
    
    // Recommended Items
    {
        priority: "recommended",
        name: "Thetis Night Splint",
        category: "Sleep",
        priceRange: {
            us: "$90-120",
            gb: "Â£60-70"
        },
        keyBenefit: "Sleep soundly knowing your Achilles is protected and healing in the optimal position",
        actionUrl: {
            us: "https://thetismedical.com/night-splint",
            gb: "https://thetismedical.com/night-splint"
        },
        actionText: "Buy Now",
        isExternal: true,
        tags: ["sleep", "recovery", "protection"],
        imagePath: "/images/thetis-night-splint-side.jpg",
        description: "The only night splint specifically designed for Achilles rupture recovery. Patented in 2024.",
        features: ["Purpose-built for sleep", "Surgeon endorsed", "Safe, comfortable and hygienic"]
    },
    {
        priority: "recommended",
        name: "EVENup Leveler",
        category: "Mobility",
        priceRange: {
            us: "$40-$50",
            gb: "Â£35-Â£40"
        },
        keyBenefit: "Walk naturally and prevent back pain by keeping your hips level",
        actionUrl: {
            us: "https://www.amazon.com/EVENup-Shoe-Balancer-Leveler-Large/dp/B08FX2T2TF?sr=8-1",
            gb: "https://www.amazon.co.uk/EVENup-Shoe-Balancer-Leveler-Large/dp/B08FX3YPWQ?th=1"
        },
        actionText: "Buy",
        isExternal: true,
        tags: ["mobility", "comfort", "posture"],
        imagePath: "/images/even-up.jpg",
        description: "Addresses leg-length discrepancy from wearing a boot. Prevents back, hip, and knee pain.",
        features: ["Universal fit", "Immediate comfort", "Prevents secondary injuries"]
    },
    
    // Comfort Items
    {
        priority: "comfort",
        name: "Elevation Wedge",
        category: "Recovery",
        priceRange: {
          us: "$25-$70",
            gb: "Â£15-Â£45"
        },
        keyBenefit: "Speed up healing and reduce swelling with proper elevation",
        actionUrl: {
            us: "https://www.amazon.com/MEGCXIT-Elevation-Circulation-Swelling-23-6%C3%9716-8%C3%978/dp/B0D31CCML3?sr=8-9",
            gb: "https://www.amazon.co.uk/s?k=leg+elevation+pillow+wedge"
        },
        actionText: "Buy",
        isExternal: true,
        tags: ["recovery", "swelling", "comfort"],
        imagePath: "/images/elevation-wedge.webp",
        description: "Critical for early recovery. UK guidelines recommend 23 hours/day elevation in first week.",
        features: ["Proper positioning", "Reduces swelling", "Improves circulation"]
    },
    {
        priority: "comfort",
        name: "Crutch Handles",
        category: "Comfort",
        priceRange: {
            us: "$20-35",
            gb: "Â£6-15"
        },
        keyBenefit: "Reduce hand pain and fatigue by up to 40% while using crutches",
        actionUrl: {
            us: "https://www.amazon.com/Crutch-Crutches-Replacement-Medical-Handgrips/dp/B09872TVZL?sr=8-6",
            gb: "https://www.amazon.co.uk/s?k=crutch+handles+soft+grips"
        },
        actionText: "Buy",
        isExternal: true,
        tags: ["mobility", "comfort", "pain-relief"],
        imagePath: "/images/soft-crutch-handles.jpg",
        description: "Clinical studies show 40% reduction in forearm pain and 35% decrease in paresthesia.",
        features: ["Memory foam comfort", "Easy installation", "Prevents nerve damage"]
    },
    {
        priority: "comfort",
        name: "Merino Wool Socks",
        category: "Comfort",
        priceRange: {
            us: "$20-35",
            gb: "Â£10-Â£25"
        },
        keyBenefit: "Stay comfortable all day with temperature-regulating, moisture-wicking socks",
        actionUrl: {
            us: "https://www.amazon.com/s?k=merino+wool+socks",
            gb: "https://www.amazon.co.uk/s?k=merino+wool+socks"
        },
        actionText: "Browse",
        isExternal: true,
        tags: ["comfort", "temperature", "hygiene"],
        imagePath: "/images/merino-socks.webp",
        description: "Naturally moisture-wicking and temperature regulating. Reduces 'hot foot' issues.",
        features: ["Moisture-wicking", "Temperature regulating", "Antimicrobial"]
    },
    
    // Optional Extras
    {
        priority: "optional",
        name: "Waterproof Boot Cover",
        category: "Hygiene",
        priceRange: {
            us: "$25-$45",
            gb: "Â£20-Â£25"
        },
        keyBenefit: "Shower with confidence and keep your boot dry and fresh",
        actionUrl: {
            us: "https://www.amazon.com/Qinaoco-Waterproof-Non-Slip-Watertight-Protector/dp/B0BZ43M5RD?sr=8-6",
            gb: "https://limboproducts.co.uk/product/limbo-full-leg-m100/"
        },
        actionText: "Buy",
        isExternal: true,
        tags: ["hygiene", "showering", "protection"],
        imagePath: "/images/boot-bag.jpg",
        description: "Essential for safe showering. NHS guidelines specifically recommend waterproof covers.",
        features: ["Prevents infection", "Reusable design", "Secure seal"]
    },
    {
        priority: "optional",
        name: "Antifungal Powder",
        category: "Hygiene",
        priceRange: {
            us: "$12-20",
            gb: "Â£6-12"
        },
        keyBenefit: "Prevent infections and keep your foot fresh during recovery",
        actionUrl: {
            us: "https://www.amazon.com/Micro-Guard-Miconazole-Nitrate-Powder-Antifungal/dp/B006HSREVC?sr=8-9",
            gb: "https://www.amazon.co.uk/s?k=antifungal+powder+feet"
        },
        actionText: "Buy",
        isExternal: true,
        tags: ["hygiene", "prevention", "comfort"],
        imagePath: "/images/antifungal.jpg",
        description: "Prevents athlete's foot and other fungal issues in the warm boot environment.",
        features: ["Prevents infections", "Reduces friction", "Daily protection"]
    },
    {
        priority: "optional",
        name: "Knee Scooter",
        category: "Mobility",
        priceRange: {
            us: "$189-$330",
            gb: "Â£100-Â£220"
        },
        keyBenefit: "Move freely and independently without crutch fatigue",
        actionUrl: {
            us: "https://www.amazon.com/KneeRover-Steerable-Scooter-Crutches-Alternative/dp/B006G0M77C?sr=1-18",
            gb: "https://www.amazon.co.uk/s?k=knee+scooter+walker"
        },
        actionText: "Buy",
        isExternal: true,
        tags: ["mobility", "independence", "comfort"],
        imagePath: "/images/knee-scooter.jpg",
        description: "Alternative to crutches for those who find them difficult or painful to use.",
        features: ["No upper body strain", "Easy maneuverability", "Basket for items"]
    },
    {
        priority: "optional",
        name: "TheraBand Resistance Bands",
        category: "Rehab",
        priceRange: {
            us: "$12-20",
            gb: "Â£10-15"
        },
        keyBenefit: "Build strength safely with progressive resistance training",
        actionUrl: {
            us: "https://www.amazon.com/THERABAND-Latex-Yellow-Red-Green/dp/B000LX4KRA",
            gb: "https://www.amazon.co.uk/THERABAND-Latex-Yellow-Red-Green/dp/B000LX4KRA"
        },
        actionText: "Buy",
        isExternal: true,
        tags: ["rehab", "strength", "recovery"],
        imagePath: "/images/theraband.jpg",
        description: "Essential for later stages of rehabilitation and strength building.",
        features: ["Progressive resistance", "Safe strength building", "Multiple resistance levels"]
    },
    {
        priority: "optional",
        name: "Boot Liner (VACOped)",
        category: "Comfort",
        priceRange: {
            us: "$40",
            gb: "Â£40"
        },
        keyBenefit: "Keep your boot fresh and comfortable with removable, washable liners",
        actionUrl: {
            us: "https://opedmedical.com/product/liner-black-grey-for-vacoped-achilles-injury-fracture-and-vacocast-fracture-walking-boot-orthoses/",
            gb: "https://oped-uk.com/product/vacoped-vacocast-liner/"
        },
        actionText: "Buy",
        isExternal: true,
        tags: ["comfort", "hygiene", "protection"],
        imagePath: "/images/boot-liner.jpg",
        description: "Removable, washable liners to keep your boot fresh and comfortable.",
        features: ["Removable", "Washable", "Odor control"]
    },
    {
        priority: "optional",
        name: "Heel Wedge Insoles",
        category: "Comfort",
        priceRange: {
            us: "$15-30",
            gb: "Â£10"
        },
        keyBenefit: "Provide additional heel elevation and comfort inside your boot",
        actionUrl: {
            us: "https://www.amazon.com/s?k=heel+wedge+achilles+shoe+insert+insole",
            gb: "https://www.amazon.co.uk/Shoe-Heel-Lift-Inserts-Pain/dp/B0C1G9GLGX/ref=sr_1_19_sspa?dib=eyJ2IjoiMSJ9.w8K1Tzh9GOXoZ6DdTNAeb64BGgR3MU1ASEjh4qzWGY6dC_MgqgTAzR-pJDT6oWjO8HhIrmf1_WM5g1g3tG00qVenjUM0KUFsAG4QAJ2SCA4bbt6oMSMMVyzt59aoWDsTnZxi9cwvqGKkxBofcz2IS1vPfvjTmC4_MuhoqhY993CBA4SjMUgGuZQckgSgzWkLWNQFQvntUYbL8ZPvWRQLmjSRXGDX95904et6kl5NJWSqCg6DaVcrinMFbeqnjmH0duUZgn2fp6sgyq4dkLOCGwc0nlaZZji8kz-czy4Jrlw.DyH2dV8enhE6oVYHheWSKalKM-WQyUa_M8hNqP_0MEw&dib_tag=se&keywords=heel+wedge+shoe+insert+insole&qid=1758631152&rnid=184306031&sr=8-19-spons&sp_csd=d2lkZ2V0TmFtZT1zcF9tdGY&th=1"
        },
        actionText: "Browse",
        isExternal: true,
        tags: ["comfort", "elevation", "support"],
        imagePath: "/images/heel-lifts.jpg",
        description: "Additional heel elevation inserts that can be used inside your boot for extra comfort and support.",
        features: ["Adjustable height", "Easy to insert", "Comfortable padding"]
    }
];

// Filter products by priority
const essentialItems = survivalKitProducts.filter(item => item.priority === "essential");
const recommendedItems = survivalKitProducts.filter(item => item.priority === "recommended");
const comfortItems = survivalKitProducts.filter(item => item.priority === "comfort");
const optionalItems = survivalKitProducts.filter(item => item.priority === "optional");

const pageTitle = "Achilles Rupture Survival Kit | Essential Products for Recovery";
const pageDescription = "The life changing products you need for Achilles rupture recovery. Simple, clear recommendations for what works.";

// Enhanced Schema.org structured data
const schemaData = {
    "@context": "https://schema.org",
    "@graph": [
        {
            "@type": "ItemList",
            name: "Achilles Rupture Survival Kit",
            description: pageDescription,
            numberOfItems: survivalKitProducts.length,
            itemListElement: survivalKitProducts.map((item, index) => ({
                "@type": "ListItem",
                position: index + 1,
                item: {
                    "@type": "Product",
                    name: item.name,
                    description: item.keyBenefit,
                    category: item.category,
                    brand: {
                        "@type": "Brand",
                        name: item.name.includes("Thetis") ? "Thetis Medical" : "Various"
                    },
                    offers: {
                        "@type": "Offer",
                        price: item.priceRange.us.replace("$", "").split("-")[0],
                        priceCurrency: "USD",
                        availability: "https://schema.org/InStock",
                        url: item.actionUrl.us
                    },
                    image: item.imagePath,
                    additionalProperty: item.features?.map(feature => ({
                        "@type": "PropertyValue",
                        name: "Feature",
                        value: feature
                    }))
                }
            }))
        },
        {
            "@type": "FAQPage",
            mainEntity: [
                {
                    "@type": "Question",
                    name: "What are the most essential items for Achilles rupture recovery?",
                    acceptedAnswer: {
                        "@type": "Answer",
                        text: "The walking boot and night splint are absolutely essential. The walking boot protects your healing tendon during the day, while the night splint provides safe sleep protection. These two items form the foundation of your recovery."
                    }
                },
                {
                    "@type": "Question",
                    name: "How much should I expect to spend on recovery equipment?",
                    acceptedAnswer: {
                        "@type": "Answer",
                        text: "Essential items cost $240-420 (Â£190-335), recommended items add $125-160 (Â£98-127), and comfort items add $85-145 (Â£67-116). Total investment for everything you need is typically $450-725 (Â£355-575)."
                    }
                }
            ]
        }
    ]
};
---

<!doctype html>
<html lang="en">
    <head>
        <BaseHead title={pageTitle} description={pageDescription} />
        <meta property="og:type" content="article" />
        <meta property="og:title" content={pageTitle} />
        <meta property="og:description" content={pageDescription} />
        <link
            rel="canonical"
            href={new URL(Astro.url.pathname, Astro.site).toString()}
        />
        <script
            type="application/ld+json"
            set:html={JSON.stringify(schemaData)}
        />
        <style>
            .btn {
                display: inline-flex;
                align-items: center;
                justify-content: center;
                font-weight: 500;
                text-decoration: none;
                border-radius: 0.375rem;
                transition: all 0.2s;
                cursor: pointer;
                padding: 0.5rem 1rem;
                font-size: 0.875rem;
            }

            .btn-primary {
                background-color: #1a1a1a;
                color: white;
                border: 1px solid #1a1a1a;
            }

            .btn-primary:hover {
                background-color: #333;
                border-color: #333;
            }

            .btn-secondary {
                background-color: #e5e7eb;
                color: #1a1a1a;
                border: 1px solid #e5e7eb;
            }

            .btn-secondary:hover {
                background-color: #d1d5db;
                border-color: #d1d5db;
            }

            .product-card {
                background: white;
                border-radius: 12px;
                box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1);
                transition: transform 0.2s, box-shadow 0.2s;
                overflow: hidden;
            }

            .product-card:hover {
                transform: translateY(-4px);
                box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1);
            }

            .priority-badge {
                display: inline-block;
                padding: 4px 12px;
                border-radius: 20px;
                font-size: 0.875rem;
                font-weight: 600;
                text-transform: uppercase;
                letter-spacing: 0.05em;
            }

            .essential-badge {
                background-color: #fee2e2;
                color: #dc2626;
            }

            .recommended-badge {
                background-color: #dbeafe;
                color: #2563eb;
            }

            .comfort-badge {
                background-color: #fef3c7;
                color: #d97706;
            }

            .optional-badge {
                background-color: #f3e8ff;
                color: #7c3aed;
            }

            .product-grid {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
                gap: 1.5rem;
            }

            @media (max-width: 768px) {
                .product-grid {
                    grid-template-columns: 1fr;
                }
            }
        </style>
    </head>
    <body>
        <Header />

        <main id="main-content">
            <section class="mx-auto px-4 py-12 max-w-6xl container">
                <!-- Hero Section -->
                <div class="mb-12 text-center">
                    <h1 class="mb-4 font-bold text-4xl md:text-5xl">
                        ðŸŽ’ Achilles Rupture Survival Kit
                    </h1>
                    <p class="mb-8 text-gray-600 text-xl">
                        The life changing products you need for recovery. Simple, clear, and proven to work.
                    </p>
                    
                    <!-- Location Selector -->
                    <div class="flex justify-center items-center gap-3 mb-8">
                        <span class="text-gray-600">Where are you shopping?</span>
                        <select 
                            id="location-selector" 
                            class="bg-white px-3 py-2 border border-gray-300 focus:border-blue-500 rounded-md focus:ring-2 focus:ring-blue-500 text-gray-900"
                        >
                            <option value="us">ðŸ‡ºðŸ‡¸ United States</option>
                            <option value="gb">ðŸ‡¬ðŸ‡§ United Kingdom</option>
                        </select>
                    </div>
                </div>



                <!-- Essential Products -->
                <section class="mb-16">
                    <h2 class="mb-8 font-bold text-3xl text-center">ðŸ¥‡ Essential Items</h2>
                    <p class="mb-8 text-gray-600 text-center">The Cornerstone of Achilles Rupture Recovery</p>
                    <div class="space-y-8">
                        {essentialItems.map((item) => (
                            <div class="p-6 product-card">
                                <div class="flex md:flex-row flex-col gap-6">
                                    <!-- Product Image -->
                                    <div class="md:w-1/3">
                                        <img
                                            src={item.imagePath}
                                            alt={item.name}
                                            class="rounded-lg w-full h-48 object-contain"
                                        />
                                    </div>

                                    <!-- Product Info -->
                                    <div class="space-y-4 md:w-2/3">
                                        <div class="flex items-center gap-3">
                                            <h3 class="font-bold text-2xl">{item.name}</h3>
                                            <span class="priority-badge essential-badge">Essential</span>
                                        </div>

                                        <div class="text-gray-600">
                                            <p class="mb-2 font-semibold">Why you need this:</p>
                                            <p>{item.keyBenefit}</p>
                                            {item.description && (
                                                <p class="mt-2 text-sm">{item.description}</p>
                                            )}
                                        </div>

                                        {item.features && (
                                            <div class="bg-gray-50 p-3 rounded-lg">
                                                <p class="mb-2 font-semibold text-sm">Key Features:</p>
                                                <ul class="space-y-1 text-sm">
                                                    {item.features.map(feature => (
                                                        <li class="flex items-center gap-2">
                                                            <span class="text-green-500">âœ“</span>
                                                            {feature}
                                                        </li>
                                                    ))}
                                                </ul>
                                            </div>
                                        )}

                                        <div class="flex justify-between items-center">
                                            <div>
                                                <p class="font-bold text-gray-900 text-xl product-price" 
                                                   data-us-price={item.priceRange.us} 
                                                   data-gb-price={item.priceRange.gb}>
                                                    {item.priceRange.us}
                                                </p>
                                                <p class="text-gray-500 text-sm">Price range</p>
                                            </div>
                                            <a
                                                href={item.actionUrl.us}
                                                class="btn btn-primary product-link"
                                                data-us-url={item.actionUrl.us}
                                                data-gb-url={item.actionUrl.gb}
                                                target={item.isExternal ? "_blank" : undefined}
                                                rel={item.isExternal ? "noopener noreferrer" : undefined}
                                            >
                                                {item.actionText}
                                                {item.isExternal && (
                                                    <svg
                                                        xmlns="http://www.w3.org/2000/svg"
                                                        width="16"
                                                        height="16"
                                                        viewBox="0 0 24 24"
                                                        fill="none"
                                                        stroke="currentColor"
                                                        stroke-width="2"
                                                        stroke-linecap="round"
                                                        stroke-linejoin="round"
                                                        class="ml-1"
                                                    >
                                                        <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6" />
                                                        <polyline points="15 3 21 3 21 9" />
                                                        <line x1="10" y1="14" x2="21" y2="3" />
                                                    </svg>
                                                )}
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        ))}
                    </div>
                </section>

                <!-- Recommended Products -->
                <section class="mb-16">
                    <h2 class="mb-8 font-bold text-3xl text-center">ðŸ¥ˆ Highly Recommended</h2>
                    <p class="mb-8 text-gray-600 text-center">These significantly improve your recovery experience</p>
                    <div class="space-y-8">
                        {recommendedItems.map((item) => (
                            <div class="p-6 product-card">
                                <div class="flex md:flex-row flex-col gap-6">
                                    <!-- Product Image -->
                                    <div class="md:w-1/3">
                                        <img
                                            src={item.imagePath}
                                            alt={item.name}
                                            class="rounded-lg w-full h-48 object-contain"
                                        />
                                    </div>

                                    <!-- Product Info -->
                                    <div class="space-y-4 md:w-2/3">
                                        <div class="flex items-center gap-3">
                                            <h3 class="font-bold text-2xl">{item.name}</h3>
                                            <span class="priority-badge recommended-badge">Recommended</span>
                                        </div>

                                        <div class="text-gray-600">
                                            <p class="mb-2 font-semibold">Why you need this:</p>
                                            <p>{item.keyBenefit}</p>
                                            {item.description && (
                                                <p class="mt-2 text-sm">{item.description}</p>
                                            )}
                                        </div>

                                        {item.features && (
                                            <div class="bg-gray-50 p-3 rounded-lg">
                                                <p class="mb-2 font-semibold text-sm">Key Features:</p>
                                                <ul class="space-y-1 text-sm">
                                                    {item.features.map(feature => (
                                                        <li class="flex items-center gap-2">
                                                            <span class="text-green-500">âœ“</span>
                                                            {feature}
                                                        </li>
                                                    ))}
                                                </ul>
                                            </div>
                                        )}

                                        <div class="flex justify-between items-center">
                                            <div>
                                                <p class="font-bold text-gray-900 text-xl product-price" 
                                                   data-us-price={item.priceRange.us} 
                                                   data-gb-price={item.priceRange.gb}>
                                                    {item.priceRange.us}
                                                </p>
                                                <p class="text-gray-500 text-sm">Price range</p>
                                            </div>
                                            <a
                                                href={item.actionUrl.us}
                                                class="btn btn-primary product-link"
                                                data-us-url={item.actionUrl.us}
                                                data-gb-url={item.actionUrl.gb}
                                                target={item.isExternal ? "_blank" : undefined}
                                                rel={item.isExternal ? "noopener noreferrer" : undefined}
                                            >
                                                {item.actionText}
                                                {item.isExternal && (
                                                    <svg
                                                        xmlns="http://www.w3.org/2000/svg"
                                                        width="16"
                                                        height="16"
                                                        viewBox="0 0 24 24"
                                                        fill="none"
                                                        stroke="currentColor"
                                                        stroke-width="2"
                                                        stroke-linecap="round"
                                                        stroke-linejoin="round"
                                                        class="ml-1"
                                                    >
                                                        <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6" />
                                                        <polyline points="15 3 21 3 21 9" />
                                                        <line x1="10" y1="14" x2="21" y2="3" />
                                                    </svg>
                                                )}
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        ))}
                    </div>
                </section>

                <!-- Comfort Products -->
                <section class="mb-16">
                    <h2 class="mb-8 font-bold text-3xl text-center">ðŸ¥‰ Comfort Enhancements</h2>
                    <p class="mb-8 text-gray-600 text-center">Make your recovery more comfortable</p>
                    <div class="product-grid">
                        {comfortItems.map((item) => (
                            <div class="p-6 product-card">
                                <img
                                    src={item.imagePath}
                                    alt={item.name}
                                    class="mb-4 rounded-lg w-full h-40 object-contain"
                                />
                                <div class="flex items-center gap-3 mb-3">
                                    <h3 class="font-bold text-xl">{item.name}</h3>
                                    <span class="priority-badge comfort-badge">Comfort</span>
                                </div>
                                <p class="mb-4 text-gray-600">{item.keyBenefit}</p>
                                {item.features && (
                                    <ul class="space-y-1 mb-4 text-sm">
                                        {item.features.map(feature => (
                                            <li class="flex items-center gap-2">
                                                <span class="text-green-500">âœ“</span>
                                                {feature}
                                            </li>
                                        ))}
                                    </ul>
                                )}
                                <div class="flex justify-between items-center">
                                    <p class="font-bold text-gray-900 product-price" 
                                       data-us-price={item.priceRange.us} 
                                       data-gb-price={item.priceRange.gb}>
                                        {item.priceRange.us}
                                    </p>
                                    <a
                                        href={item.actionUrl.us}
                                        class="btn btn-secondary product-link"
                                        data-us-url={item.actionUrl.us}
                                        data-gb-url={item.actionUrl.gb}
                                        target={item.isExternal ? "_blank" : undefined}
                                        rel={item.isExternal ? "noopener noreferrer" : undefined}
                                    >
                                        {item.actionText}
                                        {item.isExternal && (
                                            <svg
                                                xmlns="http://www.w3.org/2000/svg"
                                                width="16"
                                                height="16"
                                                viewBox="0 0 24 24"
                                                fill="none"
                                                stroke="currentColor"
                                                stroke-width="2"
                                                stroke-linecap="round"
                                                stroke-linejoin="round"
                                                class="ml-1"
                                            >
                                                <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6" />
                                                <polyline points="15 3 21 3 21 9" />
                                                <line x1="10" y1="14" x2="21" y2="3" />
                                            </svg>
                                        )}
                                    </a>
                                </div>
                            </div>
                        ))}
                    </div>
                </section>

                <!-- Optional Extras -->
                <section class="mb-16">
                    <h2 class="mb-8 font-bold text-3xl text-center">âœ¨ Optional Extras</h2>
                    <p class="mb-8 text-gray-600 text-center">Nice to have items that can improve your experience</p>
                    <div class="product-grid">
                        {optionalItems.map((item) => (
                            <div class="p-6 product-card">
                                <img
                                    src={item.imagePath}
                                    alt={item.name}
                                    class="mb-4 rounded-lg w-full h-40 object-contain"
                                />
                                <div class="flex items-center gap-3 mb-3">
                                    <h3 class="font-bold text-xl">{item.name}</h3>
                                    <span class="priority-badge optional-badge">Optional</span>
                                </div>
                                <p class="mb-4 text-gray-600">{item.keyBenefit}</p>
                                {item.features && (
                                    <ul class="space-y-1 mb-4 text-sm">
                                        {item.features.map(feature => (
                                            <li class="flex items-center gap-2">
                                                <span class="text-green-500">âœ“</span>
                                                {feature}
                                            </li>
                                        ))}
                                    </ul>
                                )}
                                <div class="flex justify-between items-center">
                                    <p class="font-bold text-gray-900 product-price" 
                                       data-us-price={item.priceRange.us} 
                                       data-gb-price={item.priceRange.gb}>
                                        {item.priceRange.us}
                                    </p>
                                    <a
                                        href={item.actionUrl.us}
                                        class="btn btn-secondary product-link"
                                        data-us-url={item.actionUrl.us}
                                        data-gb-url={item.actionUrl.gb}
                                        target={item.isExternal ? "_blank" : undefined}
                                        rel={item.isExternal ? "noopener noreferrer" : undefined}
                                    >
                                        {item.actionText}
                                        {item.isExternal && (
                                            <svg
                                                xmlns="http://www.w3.org/2000/svg"
                                                width="16"
                                                height="16"
                                                viewBox="0 0 24 24"
                                                fill="none"
                                                stroke="currentColor"
                                                stroke-width="2"
                                                stroke-linecap="round"
                                                stroke-linejoin="round"
                                                class="ml-1"
                                            >
                                                <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6" />
                                                <polyline points="15 3 21 3 21 9" />
                                                <line x1="10" y1="14" x2="21" y2="3" />
                                            </svg>
                                        )}
                                    </a>
                                </div>
                            </div>
                        ))}
                    </div>
                </section>



                <!-- Simple Message -->
                <section class="text-center">
                    <p class="text-gray-600 text-lg">
                        Start with the essential items, then add recommended items as your budget allows. 
                        Everything else is optional and can be added later.
                    </p>
                </section>
            </section>
        </main>
        <Footer />
        
        <script>
            // Location handling
            function getLocationFromURL() {
                const urlParams = new URLSearchParams(window.location.search);
                const location = urlParams.get('location');
                return location === 'gb' ? 'gb' : 'us'; // Default to US
            }
            
            function setLocationInURL(location: string) {
                const url = new URL(window.location.href);
                url.searchParams.set('location', location);
                window.history.replaceState({}, '', url.toString());
            }
            
            function updateProductLinks(location: string) {
                const productLinks = document.querySelectorAll('.product-link');
                productLinks.forEach(link => {
                    const anchorLink = link as HTMLAnchorElement;
                    const usUrl = anchorLink.getAttribute('data-us-url');
                    const gbUrl = anchorLink.getAttribute('data-gb-url');
                    if (usUrl && gbUrl) {
                        anchorLink.href = location === 'gb' ? gbUrl : usUrl;
                    }
                });
            }
            
            function updateProductPrices(location: string) {
                const productPrices = document.querySelectorAll('.product-price');
                productPrices.forEach(priceElement => {
                    const usPrice = priceElement.getAttribute('data-us-price');
                    const gbPrice = priceElement.getAttribute('data-gb-price');
                    if (usPrice && gbPrice) {
                        priceElement.textContent = location === 'gb' ? gbPrice : usPrice;
                    }
                });
            }
            
            // Initialize on page load
            document.addEventListener('DOMContentLoaded', function() {
                const currentLocation = getLocationFromURL();
                const selector = document.getElementById('location-selector') as HTMLSelectElement;
                
                if (selector) {
                    // Set selector to current location
                    selector.value = currentLocation;
                    
                    // Update all product links and prices
                    updateProductLinks(currentLocation);
                    updateProductPrices(currentLocation);
                    
                    // Handle location changes
                    selector.addEventListener('change', function(e) {
                        const target = e.target as HTMLSelectElement;
                        if (target) {
                            const newLocation = target.value;
                            setLocationInURL(newLocation);
                            updateProductLinks(newLocation);
                            updateProductPrices(newLocation);
                        }
                    });
                }
            });
        </script>
    </body>
</html>
